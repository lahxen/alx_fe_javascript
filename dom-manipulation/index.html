<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple DOM Manipulation - Quote Generator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }

        .quote-display {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            text-align: center;
            border-left: 5px solid #667eea;
        }

        #currentQuote {
            font-size: 1.5rem;
            font-style: italic;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        #currentAuthor {
            font-size: 1.1rem;
            color: #667eea;
            font-weight: bold;
        }

        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            margin: 10px 5px;
            transition: background 0.3s ease;
        }

        button:hover {
            background: #5a6fd8;
        }

        .controls {
            text-align: center;
            margin-bottom: 30px;
        }

        .add-quote {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }

        input, textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }

        textarea {
            height: 80px;
            resize: vertical;
        }

        input:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .quote-list {
            margin-top: 20px;
        }

        .quote-item {
            background: #f8f9fa;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .quote-text {
            font-style: italic;
            margin-bottom: 8px;
        }

        .quote-author {
            color: #667eea;
            font-weight: bold;
        }

        .storage-info {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #28a745;
        }

        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #dc3545;
        }

        .success {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #28a745;
        }

        #fileInput {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéØ Simple DOM Manipulation - Quote Generator</h1>
        
        <!-- Quote Display Area -->
        <div class="quote-display">
            <div id="currentQuote">"Click 'Get Random Quote' to start!"</div>
            <div id="currentAuthor">- Quote Generator</div>
        </div>

        <!-- Control Buttons -->
        <div class="controls">
            <button onclick="getRandomQuote()">üé≤ Get Random Quote</button>
            <button onclick="showAddForm()">‚ûï Add New Quote</button>
            <button onclick="exportQuotes()">üíæ Export Quotes</button>
            <button onclick="document.getElementById('fileInput').click()">üìÅ Import Quotes</button>
            <button onclick="clearAllQuotes()">üóëÔ∏è Clear All</button>
        </div>

        <!-- Hidden file input for import -->
        <input type="file" id="fileInput" accept=".json" onchange="importQuotes(event)">

        <!-- Add Quote Form (hidden by default) -->
        <div id="addQuoteForm" class="add-quote" style="display: none;">
            <h3>Add Your Own Quote</h3>
            <div class="form-group">
                <label for="quoteText">Quote:</label>
                <textarea id="quoteText" placeholder="Enter your quote here..."></textarea>
            </div>
            <div class="form-group">
                <label for="quoteAuthor">Author:</label>
                <input type="text" id="quoteAuthor" placeholder="Enter author name">
            </div>
            <button onclick="addQuote()">‚úÖ Save Quote</button>
            <button onclick="hideAddForm()">‚ùå Cancel</button>
        </div>

        <!-- Storage Information -->
        <div id="storageInfo" class="storage-info">
            <strong>üìä Storage Info:</strong>
            <div>Total Quotes: <span id="quoteCount">0</span></div>
            <div>Last Action: <span id="lastAction">Page loaded</span></div>
        </div>

        <!-- All Quotes Display -->
        <div class="quote-list">
            <h3>üìù All Your Quotes:</h3>
            <div id="allQuotes"></div>
        </div>
    </div>

    <script>
        // üéØ LEARNING DOM MANIPULATION - ALL IN ONE FILE
        
        // Global variables (data storage)
        let quotes = [];
        let currentQuoteIndex = -1;

        // üìö Default quotes to start with
        const defaultQuotes = [
            { text: "The only way to do great work is to love what you do.", author: "Steve Jobs" },
            { text: "Innovation distinguishes between a leader and a follower.", author: "Steve Jobs" },
            { text: "Life is what happens while you're making other plans.", author: "John Lennon" },
            { text: "The future belongs to those who believe in their dreams.", author: "Eleanor Roosevelt" },
            { text: "Focus on the light during dark moments.", author: "Aristotle" }
        ];

        // üöÄ Initialize the app when page loads
        window.onload = function() {
            loadQuotesFromStorage();
            updateDisplay();
            showMessage("Welcome! App loaded successfully.", "success");
        };

        // üé≤ Get a random quote and display it
        function getRandomQuote() {
            if (quotes.length === 0) {
                showMessage("No quotes available! Add some quotes first.", "error");
                return;
            }

            // DOM Manipulation: Select random quote
            currentQuoteIndex = Math.floor(Math.random() * quotes.length);
            const selectedQuote = quotes[currentQuoteIndex];

            // DOM Manipulation: Update the display elements
            document.getElementById('currentQuote').textContent = `"${selectedQuote.text}"`;
            document.getElementById('currentAuthor').textContent = `- ${selectedQuote.author}`;
            
            // Save to session storage (temporary storage for this session)
            sessionStorage.setItem('lastViewedQuote', JSON.stringify(selectedQuote));
            updateLastAction("Showed random quote");
        }

        // ‚ûï Show the add quote form
        function showAddForm() {
            // DOM Manipulation: Show hidden form
            document.getElementById('addQuoteForm').style.display = 'block';
            document.getElementById('quoteText').focus(); // Focus on first input
        }

        // ‚ùå Hide the add quote form
        function hideAddForm() {
            // DOM Manipulation: Hide form and clear inputs
            document.getElementById('addQuoteForm').style.display = 'none';
            document.getElementById('quoteText').value = '';
            document.getElementById('quoteAuthor').value = '';
        }

        // ‚úÖ Add a new quote
        function addQuote() {
            // DOM Manipulation: Get values from input elements
            const quoteText = document.getElementById('quoteText').value.trim();
            const quoteAuthor = document.getElementById('quoteAuthor').value.trim();

            // Validation
            if (!quoteText || !quoteAuthor) {
                showMessage("Please fill in both quote and author!", "error");
                return;
            }

            // Create new quote object
            const newQuote = {
                text: quoteText,
                author: quoteAuthor,
                id: Date.now(), // Simple ID generation
                dateAdded: new Date().toISOString()
            };

            // Add to quotes array
            quotes.push(newQuote);
            
            // Save to localStorage (persistent storage)
            saveQuotesToStorage();
            
            // Update the display
            updateDisplay();
            hideAddForm();
            
            showMessage(`Quote by ${quoteAuthor} added successfully!`, "success");
            updateLastAction("Added new quote");
        }

        // üóëÔ∏è Clear all quotes
        function clearAllQuotes() {
            if (confirm("Are you sure you want to delete all quotes?")) {
                quotes = [];
                localStorage.removeItem('quotesData');
                sessionStorage.removeItem('lastViewedQuote');
                
                // DOM Manipulation: Reset display
                document.getElementById('currentQuote').textContent = '"Click \'Get Random Quote\' to start!"';
                document.getElementById('currentAuthor').textContent = '- Quote Generator';
                
                updateDisplay();
                showMessage("All quotes cleared!", "success");
                updateLastAction("Cleared all quotes");
            }
        }

        // üíæ Export quotes to JSON file
        function exportQuotes() {
            if (quotes.length === 0) {
                showMessage("No quotes to export!", "error");
                return;
            }

            // Create JSON data
            const exportData = {
                quotes: quotes,
                exportDate: new Date().toISOString(),
                totalQuotes: quotes.length
            };

            // Create downloadable file
            const jsonString = JSON.stringify(exportData, null, 2);
            const blob = new Blob([jsonString], { type: 'application/json' });
            const url = URL.createObjectURL(blob);

            // DOM Manipulation: Create invisible download link
            const downloadLink = document.createElement('a');
            downloadLink.href = url;
            downloadLink.download = `my-quotes-${new Date().toISOString().split('T')[0]}.json`;
            
            // Trigger download
            document.body.appendChild(downloadLink);
            downloadLink.click();
            document.body.removeChild(downloadLink);
            
            // Clean up
            URL.revokeObjectURL(url);
            
            showMessage(`Exported ${quotes.length} quotes successfully!`, "success");
            updateLastAction("Exported quotes");
        }

        // üìÅ Import quotes from JSON file
        function importQuotes(event) {
            const file = event.target.files[0];
            if (!file) return;

            // Check file type
            if (!file.name.endsWith('.json')) {
                showMessage("Please select a JSON file!", "error");
                return;
            }

            // Read the file
            const fileReader = new FileReader();
            fileReader.onload = function(e) {
                try {
                    const importedData = JSON.parse(e.target.result);
                    
                    // Extract quotes from different formats
                    let importedQuotes = [];
                    if (importedData.quotes && Array.isArray(importedData.quotes)) {
                        importedQuotes = importedData.quotes;
                    } else if (Array.isArray(importedData)) {
                        importedQuotes = importedData;
                    }

                    if (importedQuotes.length === 0) {
                        showMessage("No valid quotes found in file!", "error");
                        return;
                    }

                    // Add imported quotes
                    const oldCount = quotes.length;
                    quotes.push(...importedQuotes);
                    
                    saveQuotesToStorage();
                    updateDisplay();
                    
                    showMessage(`Imported ${importedQuotes.length} quotes! Total: ${quotes.length}`, "success");
                    updateLastAction(`Imported ${importedQuotes.length} quotes`);
                    
                } catch (error) {
                    showMessage("Error reading file: " + error.message, "error");
                }
            };

            fileReader.readAsText(file);
            // Clear the input
            event.target.value = '';
        }

        // üíæ Save quotes to localStorage (persistent storage)
        function saveQuotesToStorage() {
            try {
                const dataToSave = {
                    quotes: quotes,
                    lastSaved: new Date().toISOString()
                };
                localStorage.setItem('quotesData', JSON.stringify(dataToSave));
            } catch (error) {
                showMessage("Error saving to storage: " + error.message, "error");
            }
        }

        // üìÅ Load quotes from localStorage
        function loadQuotesFromStorage() {
            try {
                const savedData = localStorage.getItem('quotesData');
                if (savedData) {
                    const parsedData = JSON.parse(savedData);
                    quotes = parsedData.quotes || [];
                } else {
                    // First time - load default quotes
                    quotes = [...defaultQuotes];
                    saveQuotesToStorage();
                }
            } catch (error) {
                console.error("Error loading from storage:", error);
                quotes = [...defaultQuotes]; // Fallback to defaults
            }
        }

        // üîÑ Update all displays (DOM manipulation)
        function updateDisplay() {
            // Update quote count
            document.getElementById('quoteCount').textContent = quotes.length;

            // Update all quotes display
            const allQuotesDiv = document.getElementById('allQuotes');
            
            if (quotes.length === 0) {
                allQuotesDiv.innerHTML = '<p style="text-align: center; color: #666;">No quotes yet. Add your first quote!</p>';
                return;
            }

            // DOM Manipulation: Create HTML for all quotes
            let quotesHTML = '';
            quotes.forEach((quote, index) => {
                quotesHTML += `
                    <div class="quote-item">
                        <div class="quote-text">"${quote.text}"</div>
                        <div class="quote-author">- ${quote.author}</div>
                        <button onclick="showSpecificQuote(${index})" style="margin-top: 10px; padding: 5px 10px; font-size: 0.9rem;">Show This Quote</button>
                        <button onclick="deleteQuote(${index})" style="margin-top: 10px; padding: 5px 10px; font-size: 0.9rem; background: #dc3545;">Delete</button>
                    </div>
                `;
            });
            
            allQuotesDiv.innerHTML = quotesHTML;
        }

        // üëÅÔ∏è Show a specific quote
        function showSpecificQuote(index) {
            const quote = quotes[index];
            document.getElementById('currentQuote').textContent = `"${quote.text}"`;
            document.getElementById('currentAuthor').textContent = `- ${quote.author}`;
            
            // Scroll to top to see the quote
            document.querySelector('.quote-display').scrollIntoView({ behavior: 'smooth' });
            updateLastAction("Showed specific quote");
        }

        // üóëÔ∏è Delete a specific quote
        function deleteQuote(index) {
            const quote = quotes[index];
            if (confirm(`Delete quote by ${quote.author}?`)) {
                quotes.splice(index, 1);
                saveQuotesToStorage();
                updateDisplay();
                showMessage("Quote deleted!", "success");
                updateLastAction("Deleted quote");
            }
        }

        // üìù Show messages to user
        function showMessage(message, type) {
            // Remove existing messages
            const existingMessages = document.querySelectorAll('.error, .success');
            existingMessages.forEach(msg => {
                if (msg.id !== 'storageInfo') {
                    msg.remove();
                }
            });

            // Create new message
            const messageDiv = document.createElement('div');
            messageDiv.className = type;
            messageDiv.textContent = message;
            messageDiv.style.margin = '10px 0';
            
            // DOM Manipulation: Insert message at top of container
            const container = document.querySelector('.container');
            container.insertBefore(messageDiv, container.children[1]);

            // Auto-remove after 3 seconds
            setTimeout(() => {
                if (messageDiv.parentNode) {
                    messageDiv.remove();
                }
            }, 3000);
        }

        // üìä Update last action info
        function updateLastAction(action) {
            document.getElementById('lastAction').textContent = action + ' at ' + new Date().toLocaleTimeString();
        }

        // üéØ LEARNING NOTES:
        // This file demonstrates key DOM manipulation concepts:
        // 1. document.getElementById() - Getting elements by ID
        // 2. element.textContent - Changing text content
        // 3. element.style.display - Showing/hiding elements
        // 4. element.value - Getting/setting input values
        // 5. element.innerHTML - Setting HTML content
        // 6. document.createElement() - Creating new elements
        // 7. element.appendChild() - Adding elements to DOM
        // 8. localStorage/sessionStorage - Browser storage
        // 9. Event handling with onclick
        // 10. File API for reading uploaded files
    </script>
</body>
</html>
